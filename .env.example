# ========== LLM 配置 ==========
# 支持: ollama / openai / anthropic / deepseek
LLM_PROVIDER=ollama

# Ollama（本地模型）
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL_NAME=qwen3:4b

# Anthropic Claude（支持 Extended Thinking）
# ANTHROPIC_API_KEY=sk-ant-xxx
# ANTHROPIC_BASE_URL=                              # 可选，使用代理时设置
# ANTHROPIC_MODEL_NAME=claude-sonnet-4-5-20250929

# OpenAI 兼容 API（MiniMax、Kimi 等）
# --- MiniMax M2.1 示例 ---
# OPENAI_API_KEY=sk-xxx
# OPENAI_BASE_URL=https://api.minimaxi.com/v1
# OPENAI_MODEL_NAME=MiniMax-M2.1-lightning
#
# --- Kimi K2 示例 ---
# OPENAI_API_KEY=sk-xxx
# OPENAI_BASE_URL=https://api.moonshot.cn/v1
# OPENAI_MODEL_NAME=kimi-k2-thinking

# DeepSeek（使用专用包，支持 reasoning_content）
# DEEPSEEK_API_KEY=sk-xxx
# DEEPSEEK_BASE_URL=https://api.deepseek.com
# DEEPSEEK_MODEL_NAME=deepseek-reasoner            # 或 deepseek-chat

# ========== Thinking/Reasoning 配置 ==========
# 是否启用模型的思考/推理输出
ENABLE_THINKING=true

# Anthropic Extended Thinking token 预算
THINKING_BUDGET_TOKENS=4096

# OpenAI GPT-5 推理强度 (none/low/medium/high/xhigh)
# - none: 最低延迟，跳过推理
# - low: 快速响应，推理较少
# - medium: 平衡速度和准确性 (默认)
# - high: 更深入的推理
# - xhigh: 最详细的推理 (仅 GPT-5 Pro/Thinking)
REASONING_EFFORT=high

# ========== 多模态（可选）==========
MULTIMODAL_ENABLED=false
# MULTIMODAL_PROVIDER=openai
# MULTIMODAL_MODEL_NAME=gpt-4o

# ========== Database (Docker Compose) ==========
# MySQL root 密码（Docker Compose 使用）
# DB_PASSWORD=your_secure_password_here

# ========== DownloadServer ==========
DOWNLOAD_SERVER_BASE=http://localhost:8205
DOWNLOAD_SERVER_TIMEOUT=60

# ========== Voicv (Voice Cloning) ==========
# VOICV_API_KEY=your_voicv_api_key
VOICV_BASE_URL=https://api.voicv.com/v1
VOICV_TIMEOUT=60
VOICE_CLONE_DOWNLOAD_TIMEOUT=120
VOICE_CLONE_MAX_AUDIO_BYTES=10485760
VOICE_CLONE_MAX_SOURCE_BYTES=314572800
VOICE_SOURCE_DEFAULT_CLIP_SECONDS=30
TTS_AUDIO_SPEED=0.85

# ========== Sync.so (Lipsync) ==========
# SYNCSO_API_KEY=your_syncso_api_key
SYNCSO_BASE_URL=https://api.sync.so/v2
SYNCSO_TIMEOUT=180

# ========== Media AI Uploads ==========
MEDIA_UPLOAD_DIR=./data/assets/uploads

# ========== Agent Memory ==========
# 存储后端: memory / mysql / postgres
MEMORY_BACKEND=memory

# MySQL Agent 专用数据库（当 MEMORY_BACKEND=mysql 时使用）
# AGENT_DB_HOST=localhost
# AGENT_DB_PORT=3306
# AGENT_DB_USER=root
# AGENT_DB_PASSWORD=
# AGENT_DB_NAME=remix_agent

# PostgreSQL（当 MEMORY_BACKEND=postgres 时使用）
# POSTGRES_URI=postgresql://user:password@localhost:5432/remix_agent

# ========== ASR 配置 ==========
# 后端选择: funasr (本地模型，默认) / bcut (B站必剪云端API)
ASR_BACKEND=bcut

# --- FunASR 本地模型配置 (默认) ---
# 使用阿里 FunASR (paraformer-zh + fsmn-vad + ct-punc)
# 首次运行会自动从 ModelScope 下载模型（约 1-2 GB）
ASR_MODEL=paraformer-zh                            # 主识别模型
ASR_VAD_MODEL=fsmn-vad                             # VAD 模型
ASR_PUNC_MODEL=ct-punc-c                           # 标点模型
ASR_DEVICE=cpu                                     # cuda:0 / cpu / mps
# --- Bcut 云端 API 配置 (备选) ---
# 使用 B站必剪 APP 的云端 ASR API（免费、无需 API Key）
# 优点: 识别质量更高，数字保持原格式，速度更快
# 缺点: 需要网络，依赖 B站服务稳定性
# BCUT_POLL_INTERVAL=1.0                           # 轮询间隔(秒)
# BCUT_MAX_RETRIES=500                             # 最大轮询次数

# --- 字幕切分参数 ---
SEG_MAX_CHARS=20                                   # 每段最大字符数
SEG_MAX_SECONDS=6.0                                # 每段最大时长(秒)
SEG_MIN_SECONDS=0.5                                # 每段最小时长(秒)
SEG_GAP_SPLIT=0.6                                  # 静音间隔阈值(秒)

# --- 缓存目录 ---
ASR_CACHE_DIR=./temp/asr                           # 音频预处理缓存

# ========== 视频处理 ==========
VIDEO_TEMP_DIR=./temp/videos
VIDEO_DOWNLOAD_TIMEOUT=120

# ========== 日志 ==========
LOG_LEVEL=INFO

# ========== 开发调试 ==========
USE_MOCK=false                                     # true 跳过真实的爬虫/ASR/LLM 调用

# ========== 用户认证 (JWT) ==========
# JWT 密钥（必需，至少 32 字符）
# 生成方式: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=your-super-secret-key-at-least-32-characters-long
JWT_ALGORITHM=HS256                                # 可选，默认 HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30                 # 可选，Access Token 有效期（分钟）
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30                   # 可选，Refresh Token 有效期（天）

# ========== GitHub OAuth（可选）==========
# 创建 OAuth App: https://github.com/settings/developers
# GITHUB_CLIENT_ID=Iv1.xxxxxxxxxxxxxxxx
# GITHUB_CLIENT_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# GITHUB_CALLBACK_URL=http://localhost:5373/auth/callback/github

# ========== Google OAuth（可选）==========
# 创建凭据: https://console.cloud.google.com/apis/credentials
# GOOGLE_CLIENT_ID=xxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.apps.googleusercontent.com
# GOOGLE_CLIENT_SECRET=GOCSPX-xxxxxxxxxxxxxxxxxxxxxxxx
# GOOGLE_CALLBACK_URL=http://localhost:5373/auth/callback/google

# ========== SMTP 邮件服务（可选）==========
# 用于发送邮箱验证和密码重置邮件
# 不配置时，用户仍可正常注册登录，但无法验证邮箱和找回密码

# --- Gmail 示例 ---
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password                  # 需要使用应用专用密码
# SMTP_FROM_EMAIL=your-email@gmail.com
# SMTP_FROM_NAME=Remix AI Studio
# SMTP_USE_TLS=true

# --- 阿里云企业邮箱示例 ---
# SMTP_HOST=smtp.qiye.aliyun.com
# SMTP_PORT=465
# SMTP_USER=your-email@your-domain.com
# SMTP_PASSWORD=your-password
# SMTP_FROM_EMAIL=your-email@your-domain.com
# SMTP_FROM_NAME=Remix AI Studio
# SMTP_USE_TLS=true

# ========== 前端 URL ==========
FRONTEND_URL=http://localhost:5373                 # 用于邮件中的链接

# ============================================================
# Docker Compose 平台特定说明
# ============================================================
#
# Docker 部署时建议:
#   MEMORY_BACKEND=mysql
#   ASR_BACKEND=bcut  (或 funasr + GPU)
#
# Linux (with NVIDIA GPU):
#   1. Install NVIDIA Container Toolkit
#   2. Uncomment GPU section in docker-compose.yml
#   3. Set ASR_BACKEND=funasr and ASR_DEVICE=cuda:0
#
# Windows (Docker Desktop + WSL2):
#   1. Enable WSL2 backend in Docker Desktop
#   2. Install NVIDIA Container Toolkit in WSL2
#   3. Uncomment GPU section in docker-compose.yml
#   4. Set ASR_BACKEND=funasr and ASR_DEVICE=cuda:0
#
# macOS (Docker Desktop):
#   - GPU not supported in Docker
#   - Recommend ASR_BACKEND=bcut (cloud API)
#   - Or ASR_BACKEND=funasr with ASR_DEVICE=cpu (slow)
#
# ============================================================
